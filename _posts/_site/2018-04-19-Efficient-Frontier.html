<p>I introduced the Efficient Frontier portfolio optimization scheme in a presentation for MATH480 - Special Topics. <br />
The following is the tear sheet generated for the Efficient Frontier implementation on Quantopian.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bt</span> <span class="o">=</span> <span class="n">get_backtest</span><span class="p">(</span><span class="s">'5ad8e9664a5ac34596df6c29'</span><span class="p">)</span>
<span class="n">bt</span><span class="o">.</span><span class="n">create_full_tear_sheet</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>100% Time: 0:00:02|###########################################################|
</code></pre></div></div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;"><th>Start date</th>&lt;td colspan=2&gt;2011-01-05&lt;/td&gt;</tr>
    <tr style="text-align: right;"><th>End date</th>&lt;td colspan=2&gt;2018-04-18&lt;/td&gt;</tr>
    <tr style="text-align: right;"><th>Total months</th>&lt;td colspan=2&gt;87&lt;/td&gt;</tr>
    <tr style="text-align: right;">
      <th></th>
      <th>Backtest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Annual return</th>
      <td>11.0%</td>
    </tr>
    <tr>
      <th>Cumulative returns</th>
      <td>113.7%</td>
    </tr>
    <tr>
      <th>Annual volatility</th>
      <td>15.2%</td>
    </tr>
    <tr>
      <th>Sharpe ratio</th>
      <td>0.76</td>
    </tr>
    <tr>
      <th>Calmar ratio</th>
      <td>0.65</td>
    </tr>
    <tr>
      <th>Stability</th>
      <td>0.93</td>
    </tr>
    <tr>
      <th>Max drawdown</th>
      <td>-16.9%</td>
    </tr>
    <tr>
      <th>Omega ratio</th>
      <td>1.14</td>
    </tr>
    <tr>
      <th>Sortino ratio</th>
      <td>1.07</td>
    </tr>
    <tr>
      <th>Skew</th>
      <td>-0.41</td>
    </tr>
    <tr>
      <th>Kurtosis</th>
      <td>2.51</td>
    </tr>
    <tr>
      <th>Tail ratio</th>
      <td>0.99</td>
    </tr>
    <tr>
      <th>Daily value at risk</th>
      <td>-1.9%</td>
    </tr>
    <tr>
      <th>Gross leverage</th>
      <td>0.98</td>
    </tr>
    <tr>
      <th>Daily turnover</th>
      <td>28.2%</td>
    </tr>
    <tr>
      <th>Alpha</th>
      <td>0.01</td>
    </tr>
    <tr>
      <th>Beta</th>
      <td>0.79</td>
    </tr>
  </tbody>
</table>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Worst drawdown periods</th>
      <th>Net drawdown in %</th>
      <th>Peak date</th>
      <th>Valley date</th>
      <th>Recovery date</th>
      <th>Duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.87</td>
      <td>2011-02-18</td>
      <td>2011-08-10</td>
      <td>2011-10-27</td>
      <td>180</td>
    </tr>
    <tr>
      <th>1</th>
      <td>15.97</td>
      <td>2015-04-15</td>
      <td>2016-01-11</td>
      <td>2016-04-27</td>
      <td>271</td>
    </tr>
    <tr>
      <th>2</th>
      <td>13.95</td>
      <td>2012-02-24</td>
      <td>2012-06-01</td>
      <td>2013-01-09</td>
      <td>229</td>
    </tr>
    <tr>
      <th>3</th>
      <td>12.48</td>
      <td>2011-10-28</td>
      <td>2011-11-23</td>
      <td>2012-02-21</td>
      <td>83</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8.30</td>
      <td>2016-04-27</td>
      <td>2016-06-22</td>
      <td>2016-08-15</td>
      <td>79</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/img/output_1_3.png" alt="png" /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/lib/python2.7/dist-packages/numpy/lib/function_base.py:3834: RuntimeWarning: Invalid value encountered in percentile
  RuntimeWarning)
</code></pre></div></div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Stress Events</th>
      <th>mean</th>
      <th>min</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>US downgrade/European Debt Crisis</th>
      <td>0.05%</td>
      <td>-5.14%</td>
      <td>2.85%</td>
    </tr>
    <tr>
      <th>Fukushima</th>
      <td>0.08%</td>
      <td>-1.57%</td>
      <td>1.58%</td>
    </tr>
    <tr>
      <th>EZB IR Event</th>
      <td>0.00%</td>
      <td>-1.45%</td>
      <td>2.45%</td>
    </tr>
    <tr>
      <th>Apr14</th>
      <td>0.05%</td>
      <td>-1.65%</td>
      <td>1.41%</td>
    </tr>
    <tr>
      <th>Oct14</th>
      <td>0.31%</td>
      <td>-1.59%</td>
      <td>2.19%</td>
    </tr>
    <tr>
      <th>Fall2015</th>
      <td>-0.27%</td>
      <td>-3.62%</td>
      <td>1.72%</td>
    </tr>
    <tr>
      <th>Recovery</th>
      <td>0.01%</td>
      <td>-5.14%</td>
      <td>4.33%</td>
    </tr>
    <tr>
      <th>New Normal</th>
      <td>0.06%</td>
      <td>-4.05%</td>
      <td>3.51%</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/img/output_1_6.png" alt="png" /></p>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Top 10 long positions of all time</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>XLB-19654</th>
      <td>100.13%</td>
    </tr>
    <tr>
      <th>XLE-19655</th>
      <td>100.03%</td>
    </tr>
    <tr>
      <th>XLU-19660</th>
      <td>99.99%</td>
    </tr>
    <tr>
      <th>XLF-19656</th>
      <td>99.97%</td>
    </tr>
    <tr>
      <th>XLY-19662</th>
      <td>99.94%</td>
    </tr>
    <tr>
      <th>XLP-19659</th>
      <td>99.93%</td>
    </tr>
    <tr>
      <th>XLV-19661</th>
      <td>99.88%</td>
    </tr>
    <tr>
      <th>XLI-19657</th>
      <td>99.71%</td>
    </tr>
    <tr>
      <th>XLK-19658</th>
      <td>99.71%</td>
    </tr>
  </tbody>
</table>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Top 10 short positions of all time</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Top 10 positions of all time</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>XLB-19654</th>
      <td>100.13%</td>
    </tr>
    <tr>
      <th>XLE-19655</th>
      <td>100.03%</td>
    </tr>
    <tr>
      <th>XLU-19660</th>
      <td>99.99%</td>
    </tr>
    <tr>
      <th>XLF-19656</th>
      <td>99.97%</td>
    </tr>
    <tr>
      <th>XLY-19662</th>
      <td>99.94%</td>
    </tr>
    <tr>
      <th>XLP-19659</th>
      <td>99.93%</td>
    </tr>
    <tr>
      <th>XLV-19661</th>
      <td>99.88%</td>
    </tr>
    <tr>
      <th>XLI-19657</th>
      <td>99.71%</td>
    </tr>
    <tr>
      <th>XLK-19658</th>
      <td>99.71%</td>
    </tr>
  </tbody>
</table>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>All positions ever held</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>XLB-19654</th>
      <td>100.13%</td>
    </tr>
    <tr>
      <th>XLE-19655</th>
      <td>100.03%</td>
    </tr>
    <tr>
      <th>XLU-19660</th>
      <td>99.99%</td>
    </tr>
    <tr>
      <th>XLF-19656</th>
      <td>99.97%</td>
    </tr>
    <tr>
      <th>XLY-19662</th>
      <td>99.94%</td>
    </tr>
    <tr>
      <th>XLP-19659</th>
      <td>99.93%</td>
    </tr>
    <tr>
      <th>XLV-19661</th>
      <td>99.88%</td>
    </tr>
    <tr>
      <th>XLI-19657</th>
      <td>99.71%</td>
    </tr>
    <tr>
      <th>XLK-19658</th>
      <td>99.71%</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/img/output_1_11.png" alt="png" /></p>

<p><img src="/assets/img/output_1_12.png" alt="png" /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/lib/python2.7/dist-packages/pyfolio/perf_attrib.py:611: UserWarning: This algorithm has relatively high turnover of its positions. As a result, performance attribution might not be fully accurate.

Performance attribution is calculated based on end-of-day holdings and does not account for intraday activity. Algorithms that derive a high percentage of returns from buying and selling within the same day may receive inaccurate performance attribution.

  warnings.warn(warning_msg)
</code></pre></div></div>

<h2 id="performance-relative-to-common-risk-factors">Performance Relative to Common Risk Factors</h2>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Summary Statistics</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Annualized Specific Return</th>
      <td>-7.05%</td>
    </tr>
    <tr>
      <th>Annualized Common Return</th>
      <td>19.26%</td>
    </tr>
    <tr>
      <th>Annualized Total Return</th>
      <td>11.00%</td>
    </tr>
    <tr>
      <th>Specific Sharpe Ratio</th>
      <td>-1.44</td>
    </tr>
  </tbody>
</table>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Exposures Summary</th>
      <th>Average Risk Factor Exposure</th>
      <th>Annualized Return</th>
      <th>Cumulative Return</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>basic_materials</th>
      <td>0.08</td>
      <td>1.78%</td>
      <td>13.69%</td>
    </tr>
    <tr>
      <th>consumer_cyclical</th>
      <td>0.07</td>
      <td>1.83%</td>
      <td>14.10%</td>
    </tr>
    <tr>
      <th>financial_services</th>
      <td>0.10</td>
      <td>0.53%</td>
      <td>3.93%</td>
    </tr>
    <tr>
      <th>real_estate</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
    <tr>
      <th>consumer_defensive</th>
      <td>0.07</td>
      <td>3.55%</td>
      <td>28.89%</td>
    </tr>
    <tr>
      <th>health_care</th>
      <td>0.09</td>
      <td>1.36%</td>
      <td>10.32%</td>
    </tr>
    <tr>
      <th>utilities</th>
      <td>0.22</td>
      <td>3.95%</td>
      <td>32.54%</td>
    </tr>
    <tr>
      <th>communication_services</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
    <tr>
      <th>energy</th>
      <td>0.18</td>
      <td>1.84%</td>
      <td>14.20%</td>
    </tr>
    <tr>
      <th>industrials</th>
      <td>0.05</td>
      <td>2.39%</td>
      <td>18.79%</td>
    </tr>
    <tr>
      <th>technology</th>
      <td>0.12</td>
      <td>0.61%</td>
      <td>4.52%</td>
    </tr>
    <tr>
      <th>momentum</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
    <tr>
      <th>size</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
    <tr>
      <th>value</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
    <tr>
      <th>short_term_reversal</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
    <tr>
      <th>volatility</th>
      <td>0.00</td>
      <td>0.00%</td>
      <td>0.00%</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/img/output_1_17.png" alt="png" /></p>

